{
  "info": {
    "name": "LLM Gateway - í†µí•© í”Œë¡œìš°",
    "description": "í´ë¼ì´ì–¸íŠ¸ í† í° ì¬í™œìš© í†µí•© ì²˜ë¦¬ í”Œë¡œìš°\n\ní”Œë¡œìš°:\n1. í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡¬í”„íŠ¸ì™€ í† í° ì „ì†¡\n2. Gatewayê°€ í† í°ìœ¼ë¡œ MCP ë°ì´í„° ìˆ˜ì§‘\n3. ìˆ˜ì§‘ëœ ë°ì´í„°ì™€ í•¨ê»˜ LLM ì²˜ë¦¬\n4. í†µí•© ì‘ë‹µ ë°˜í™˜",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:1111",
      "type": "string"
    },
    {
      "key": "gatewayApiKey",
      "value": "",
      "type": "string",
      "description": "Gateway ì¸ì¦ìš© API Key (tlx_)"
    },
    {
      "key": "clientToken",
      "value": "",
      "type": "string",
      "description": "í´ë¼ì´ì–¸íŠ¸ Bearer í† í° (MCP ì¸ì¦ìš©)"
    },
    {
      "key": "contextId",
      "value": "",
      "type": "string",
      "description": "ì €ì¥ëœ ì»¨í…ìŠ¤íŠ¸ ID"
    }
  ],
  "item": [
    {
      "name": "ğŸ” Step 1: ì¤€ë¹„",
      "item": [
        {
          "name": "Gateway API Key ìƒì„±",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"API Key ìƒì„± ì„±ê³µ\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "if (response.apiKey) {",
                  "    pm.collectionVariables.set(\"gatewayApiKey\", response.apiKey);",
                  "    console.log(\"âœ… Gateway API Key ì €ì¥: \" + response.apiKey);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/api-key/generate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "api-key", "generate"]
            },
            "description": "Gateway ì ‘ê·¼ìš© API Key ìƒì„±"
          }
        },
        {
          "name": "í´ë¼ì´ì–¸íŠ¸ í† í° ì„¤ì •",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ í† í°ìœ¼ë¡œ êµì²´ í•„ìš”",
                  "// ì˜ˆ: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "const clientToken = \"eyJraWQiOiI2Mzg1ZWRhYy05NTAwLTQwYzAtOTQzNy04YThlYmRkNWY1NWYiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIxRUVCRDA2QjA1RTQxMUVGQjExQzBBMzFCOTYyODBBMiIsImF1ZCI6ImxvY2FsaG9zdCIsImFjY291bnRJZCI6IjFFRUJEMDZCMDVFNDExRUZCMTFDMEEzMUI5NjI4MEEyIiwibmJmIjoxNzU0ODc4NDQ2LCJsb2dpbklkIjoieWpAcGVycGwuaW8iLCJpc3MiOiJsb2NhbGhvc3QiLCJleHAiOjE3NTQ4NzkzNDYsImlhdCI6MTc1NDg3ODQ0Nn0.hl6NuG5TqiyMF_pvUb0NlpDk3PbbDwbSzoPXunRzBZX3D67ShS4P143GBMnXN1dW1m03-fPhSrUd30fGk2YMjzHv88mxi4iMEX4OOIKYhAwi902WK3dTFSwjjwA-ZKpOjg4KtsP9PhD30jXeb_uy7pzYuXavGM04Gto67Q8n55hPfB9nJLfrcz46Ith3GYcbDdXv0vno8GyUwmAYbZLCKkgM8QfmBZ1IeqmrCLvKhGTQc9QVvyemN8vM1tySE4awACiEXmcTX7EC6MqHvtKn1pq1mOld4WKZOwBUWUr9uIrccdxJ6L_pbW2Lq6hK6HIxcYiU6ZSkn9xgA4_feMl6_g\";",
                  "",
                  "pm.collectionVariables.set(\"clientToken\", clientToken);",
                  "console.log(\"ğŸ“Œ í´ë¼ì´ì–¸íŠ¸ í† í° ì„¤ì • ì™„ë£Œ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "í´ë¼ì´ì–¸íŠ¸ í† í°ì„ ë³€ìˆ˜ì— ì„¤ì •\n\nâš ï¸ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ì˜ Bearer í† í°ìœ¼ë¡œ êµì²´ í•„ìš”"
          }
        }
      ]
    },
    {
      "name": "ğŸ”„ Step 2: í†µí•© ì²˜ë¦¬",
      "item": [
        {
          "name": "âœ¨ í†µí•© ìš”ì²­ (MCP + LLM)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"í†µí•© ì²˜ë¦¬ ì„±ê³µ\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "if (response.context && response.context.contextId) {",
                  "    pm.collectionVariables.set(\"contextId\", response.context.contextId);",
                  "    console.log(\"ğŸ“ ì»¨í…ìŠ¤íŠ¸ ID ì €ì¥: \" + response.context.contextId);",
                  "}",
                  "",
                  "console.log(\"\\n=== í†µí•© ì‘ë‹µ ===\\n\");",
                  "",
                  "if (response.mcpData) {",
                  "    console.log(\"ğŸ“Š MCP ë°ì´í„°:\");",
                  "    console.log(JSON.stringify(response.mcpData, null, 2));",
                  "}",
                  "",
                  "if (response.llmResponse && response.llmResponse.choices) {",
                  "    console.log(\"\\nğŸ¤– LLM ì‘ë‹µ:\");",
                  "    console.log(response.llmResponse.choices[0].message.content);",
                  "}",
                  "",
                  "if (response.context) {",
                  "    console.log(\"\\nâ±ï¸ ì²˜ë¦¬ ì‹œê°„: \" + response.context.processingTime + \"ms\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}",
                "description": "Gateway ì¸ì¦"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}",
                "description": "í´ë¼ì´ì–¸íŠ¸ í† í° (MCPìš©)"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"í‰ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”. ì „ì²´ í‰ê°€ ìˆ˜ì™€ ìƒíƒœë³„ ë¶„í¬ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\",\n  \"mcpTools\": [\"get_appraisals\"],\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\",\n  \"temperature\": 0.7,\n  \"maxTokens\": 500\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "process"]
            },
            "description": "MCP ë„êµ¬ë¡œ ë°ì´í„° ìˆ˜ì§‘ + LLM ë¶„ì„ì„ í•œë²ˆì— ì²˜ë¦¬"
          }
        },
        {
          "name": "ğŸ“Š ë³µìˆ˜ MCP ë„êµ¬ ì‚¬ìš©",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"í‰ê°€ ëª©ë¡ê³¼ ì‘ë‹µ ê²°ê³¼ë¥¼ ëª¨ë‘ ë¶„ì„í•´ì„œ ì¢…í•© ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\",\n  \"mcpTools\": [\"get_appraisals\", \"get_response_results\"],\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\",\n  \"temperature\": 0.5,\n  \"maxTokens\": 1000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "process"]
            },
            "description": "ì—¬ëŸ¬ MCP ë„êµ¬ë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìˆ˜ì§‘"
          }
        },
        {
          "name": "ğŸ’¬ ë‹¨ìˆœ í”„ë¡¬í”„íŠ¸ (MCP ì—†ì´)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"API Gatewayì˜ ì¥ì ì„ 3ê°€ì§€ ì•Œë ¤ì£¼ì„¸ìš”.\",\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/prompt",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "prompt"]
            },
            "description": "MCP ì—†ì´ LLMë§Œ ì‚¬ìš©í•˜ëŠ” ê°„ë‹¨í•œ ìš”ì²­"
          }
        },
        {
          "name": "ğŸ“¡ ìŠ¤íŠ¸ë¦¬ë° í†µí•© ìš”ì²­",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"í‰ê°€ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”.\",\n  \"mcpTools\": [\"get_appraisals\"],\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\",\n  \"stream\": true,\n  \"temperature\": 0.7\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "process"]
            },
            "description": "Server-Sent Eventsë¡œ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ\n\nâš ï¸ Postmanì—ì„œëŠ” ì „ì²´ ìŠ¤íŠ¸ë¦¼ ì™„ë£Œ í›„ í‘œì‹œ"
          }
        }
      ]
    },
    {
      "name": "ğŸ” Step 3: ì¡°íšŒ",
      "item": [
        {
          "name": "ì‚¬ìš© ê°€ëŠ¥í•œ MCP ë„êµ¬",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "if (response.tools && response.tools.length > 0) {",
                  "    console.log(\"ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ MCP ë„êµ¬:\");",
                  "    response.tools.forEach(tool => {",
                  "        console.log(`  - ${tool.name}: ${tool.description}`);",
                  "    });",
                  "} else if (response.authenticated === false) {",
                  "    console.log(\"âŒ MCP ì¸ì¦ ì‹¤íŒ¨: í´ë¼ì´ì–¸íŠ¸ í† í°ì´ ìœ íš¨í•˜ì§€ ì•ŠìŒ\");",
                  "} else {",
                  "    console.log(\"âš ï¸ ì‚¬ìš© ê°€ëŠ¥í•œ MCP ë„êµ¬ê°€ ì—†ìŒ\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}",
                "description": "í´ë¼ì´ì–¸íŠ¸ í† í°ìœ¼ë¡œ MCP ì¸ì¦"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/available-tools",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "available-tools"]
            },
            "description": "í´ë¼ì´ì–¸íŠ¸ í† í°ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ MCP ë„êµ¬ ì¡°íšŒ"
          }
        },
        {
          "name": "ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const context = pm.response.json();",
                  "    console.log(\"ğŸ“¦ ì €ì¥ëœ ì»¨í…ìŠ¤íŠ¸:\");",
                  "    console.log(\"  - ìš”ì²­:\", context.request?.prompt?.substring(0, 50) + \"...\");",
                  "    console.log(\"  - MCP ë„êµ¬:\", context.request?.mcpTools);",
                  "    console.log(\"  - ì‘ë‹µ ê¸¸ì´:\", context.llmResponse?.choices?.[0]?.message?.content?.length);",
                  "} else {",
                  "    console.log(\"âŒ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get(\"contextId\")) {",
                  "    console.log(\"âš ï¸ contextIdê°€ ì—†ìŠµë‹ˆë‹¤. í†µí•© ìš”ì²­ì„ ë¨¼ì € ì‹¤í–‰í•˜ì„¸ìš”.\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/context/{{contextId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "context", "{{contextId}}"]
            },
            "description": "ì´ì „ ìš”ì²­ì˜ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ"
          }
        }
      ]
    },
    {
      "name": "ğŸ§ª Step 4: ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸",
      "item": [
        {
          "name": "ì‹œë‚˜ë¦¬ì˜¤: í‰ê°€ ë¶„ì„ ë¦¬í¬íŠ¸",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:\\n1. ì „ì²´ í‰ê°€ ëª©ë¡ ìš”ì•½\\n2. ìƒíƒœë³„ ë¶„í¬ ë¶„ì„\\n3. ê°œì„  ì œì•ˆì‚¬í•­ 3ê°€ì§€\\n\\në§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\",\n  \"mcpTools\": [\"get_appraisals\"],\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\",\n  \"temperature\": 0.3,\n  \"maxTokens\": 800\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "process"]
            },
            "description": "ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë‚˜ë¦¬ì˜¤: í‰ê°€ ë°ì´í„° ê¸°ë°˜ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±"
          }
        },
        {
          "name": "ì‹œë‚˜ë¦¬ì˜¤: íŠ¹ì • ì§ˆë¬¸ ë‹µë³€",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{gatewayApiKey}}"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í‰ê°€ëŠ” ëª‡ ê°œì´ê³ , ì™„ë£Œëœ í‰ê°€ëŠ” ëª‡ ê°œì¸ê°€ìš”? ê°„ë‹¨íˆ ë‹µí•´ì£¼ì„¸ìš”.\",\n  \"mcpTools\": [\"get_appraisals\"],\n  \"provider\": \"openai\",\n  \"model\": \"gpt-3.5-turbo\",\n  \"temperature\": 0,\n  \"maxTokens\": 100\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "process"]
            },
            "description": "ë°ì´í„° ê¸°ë°˜ íŠ¹ì • ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "console.log('ğŸ”„ í†µí•© í”Œë¡œìš° ì‹œì‘');",
          "console.log('  Gateway í¬íŠ¸: 1111');",
          "console.log('  MCP í¬íŠ¸: 9999');",
          "console.log('  Redis í¬íŠ¸: 3333');"
        ]
      }
    }
  ]
}